<!-- SINGLE RECIPE PAGE - EXTENSION OF BASE.HTML -->

{% extends 'base.html' %}
{% block content %}
<!-- grey layer under the transparent menu to make menu text more visible -->
<div class="menushadow"></div>
<!-- display recipe from mongoDB -->
<div class="container single-recipe-cont" id="recipe-area">
    <div class="row">
        <div class="col-12 singl-recipe-head">
            <h2 class="text-center">{{recipe.recipe_name}}</h2>
            <img class="meal_image" src="{{url_for('static', filename='uploaded_img/'+recipe.meal_image)}}"
                alt="meal image">
            <p>{{recipe.meal_description}}</p>
            
        </div>
        <div class="col-12 col-md-6 offset-md-3 singl-recipe-body">
            <!-- Create loop for to display all ingredients in a list -->
            <h4 class="text-center">Ingredients:</h4>
            <p>number of ingredients: {{recipe.amount_of_ingred}} </p>
            <ol class="ingredients-list">
                {% for key, value in ingredients.items() %}
                {% if 'name' in key %}
                <li class="ingredient-items">
                    {{value}}: 
                        {% elif 'amount' in key %}
                        {{ value }} 
                        {% elif 'measure' in key %}
                        {{ value }}</li>
                
               
                {% endif %}
                {% endfor %}
            </ol>
        </div>
            <!-- Create loop for to display all preparation steps in a list -->
            <div class="col-12 col-md-8 offset-md-2 singl-recipe-body">
            <h4 class="text-center">Preparation:</h4>
            <ol>
                {% for key, value in recipe.items() %}
                {% if 'preparation' in key and 'step' in key %}
                <li>{{value}}</li>
                {% endif %}
                {% endfor %}
            </ol>
        </div>
    </div>
</div>
<!-- ACTION BUTTONS FOR PRINT/SEND AND DOWNLOAD RECIPE -->
<div class="control-btns text-center">
    <!-- print recipe -->
    <button onclick="printRecipe()" class="btn btn-dark mb-3"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-printer-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <path d="M5 1a2 2 0 0 0-2 2v1h10V3a2 2 0 0 0-2-2H5z"/>
        <path fill-rule="evenodd" d="M11 9H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1z"/>
        <path fill-rule="evenodd" d="M0 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-2a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2H2a2 2 0 0 1-2-2V7zm2.5 1a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/>
      </svg>  Print recipe</button>
      <!-- send recipe by email - form -->
    <form class="mailRecipe text-center mb-3" action="/send-recipe-to-email/{{recipe.recipe_name}}" method="POST">
                {{ mailRecipe.csrf_token }}
                {{ mailRecipe.submit(class_="btn btn-dark mb-1 my-send-rc-btn")}}
                {{ mailRecipe.emailto(class_='form-control', placeholder='email@address.com') }}
    </form>
    <!-- download recipe as pdf - button linked to pdf_template function which is not work on heroku, plese look to app.py for more information about, 
            Please uncomment on local machine if needed -->
    <!-- <a href="/pdf/{{recipe.recipe_name}}" class="btn btn-dark mb-5">
        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-file-arrow-down-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM8 5a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 9.293V5.5A.5.5 0 0 1 8 5z"/>
          </svg>  Download as PDF
        </a> -->
        <a class="btn btn-dark mb-3" href="{{url_for('delete_recipe', recipe_id=recipe._id)}}"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-printer-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M5 1a2 2 0 0 0-2 2v1h10V3a2 2 0 0 0-2-2H5z"/>
            <path fill-rule="evenodd" d="M11 9H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1z"/>
            <path fill-rule="evenodd" d="M0 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-2a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2H2a2 2 0 0 1-2-2V7zm2.5 1a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/>
          </svg>  Remove recipe</a>
          <!-- <a class="btn btn-dark mb-3" href="{{url_for('edit_recipe', recipe_id=recipe._id)}}"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-printer-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M5 1a2 2 0 0 0-2 2v1h10V3a2 2 0 0 0-2-2H5z"/>
            <path fill-rule="evenodd" d="M11 9H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1z"/>
            <path fill-rule="evenodd" d="M0 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-2a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2H2a2 2 0 0 1-2-2V7zm2.5 1a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/>
          </svg>  Edit recipe</a> -->
</div>
{% endblock %}